<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.189">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Andreas Handel">
<meta name="dcterms.date" content="2019-10-12">
<meta name="description" content="Andreas Handel’s personal website.">

<title>Andreas Handel - Analysis of pizza restaurants</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../..//files/icon.png" rel="icon" type="image/png">
<script src="../../site_libs/cookie-consent/cookie-consent.js"></script>
<link href="../../site_libs/cookie-consent/cookie-consent.css" rel="stylesheet">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="../../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>

<script type="text/plain" cookie-consent="tracking">

(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-48442618-4', 'auto');

ga('send', {
  hitType: 'pageview',
  'anonymizeIp': true,
});
</script>

<script type="text/javascript" charset="UTF-8">
document.addEventListener('DOMContentLoaded', function () {
cookieconsent.run({
  "notice_banner_type":"simple",
  "consent_type":"implied",
  "palette":"light",
  "language":"en",
  "page_load_consent_levels":["strictly-necessary","functionality","tracking","targeting"],
  "notice_banner_reject_button_hide":false,
  "preferences_center_close_button_hide":false,
  "website_name":""
  });
});
</script> 
  
<script src="../../site_libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="../../site_libs/plotly-binding-4.10.0/plotly.js"></script>
<script src="../../site_libs/typedarray-0.1/typedarray.min.js"></script>
<script src="../../site_libs/jquery-3.5.1/jquery.min.js"></script>
<link href="../../site_libs/crosstalk-1.2.0/css/crosstalk.min.css" rel="stylesheet">
<script src="../../site_libs/crosstalk-1.2.0/js/crosstalk.min.js"></script>
<link href="../../site_libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet">
<script src="../../site_libs/plotly-main-2.5.1/plotly-latest.min.js"></script>


<link rel="stylesheet" href="../../customstyle.css">
<meta name="twitter:title" content="Andreas Handel - Analysis of pizza restaurants">
<meta name="twitter:description" content="An analysis of TidyTuesday data for pizza restaurants and their ratings.">
<meta name="twitter:image" content="https://www.andreashandel.com/posts\2019-10-02-tidy-tuesday-exploration\featured.png">
<meta name="twitter:creator" content="@andreashandel">
<meta name="twitter:image-height" content="1499">
<meta name="twitter:image-width" content="2100">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../../files/logo.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Andreas Handel</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html">About</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../posts.html">Posts</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../presentations.html">Presentations</a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../projects.html">Projects</a>
  </li>  
</ul>
              <div class="quarto-toggle-container">
                  <a href="" class="quarto-color-scheme-toggle nav-link" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
              </div>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default toc-left page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Analysis of pizza restaurants</h1>
            <p class="subtitle lead">A TidyTuesday exercise</p>
                  <div>
        <div class="description">
          An analysis of TidyTuesday data for pizza restaurants and their ratings.
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">R</div>
                <div class="quarto-category">Data Analysis</div>
                <div class="quarto-category">Tidy Tuesday</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Andreas Handel </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">October 12, 2019</p>
      </div>
    </div>
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#loading-packages" id="toc-loading-packages" class="nav-link" data-scroll-target="#loading-packages">Loading packages</a></li>
  <li><a href="#data-loading" id="toc-data-loading" class="nav-link" data-scroll-target="#data-loading">Data loading</a></li>
  <li><a href="#analysis-ideas" id="toc-analysis-ideas" class="nav-link" data-scroll-target="#analysis-ideas">Analysis Ideas</a></li>
  <li><a href="#initial-data-exploration" id="toc-initial-data-exploration" class="nav-link" data-scroll-target="#initial-data-exploration">Initial data exploration</a></li>
  <li><a href="#ratings-agreement-analysis" id="toc-ratings-agreement-analysis" class="nav-link" data-scroll-target="#ratings-agreement-analysis">Ratings agreement analysis</a></li>
  <li><a href="#price-vs-ratings-analysis" id="toc-price-vs-ratings-analysis" class="nav-link" data-scroll-target="#price-vs-ratings-analysis">Price vs ratings analysis</a></li>
  <li><a href="#rating-versus-location" id="toc-rating-versus-location" class="nav-link" data-scroll-target="#rating-versus-location">Rating versus location</a></li>
  <li><a href="#hyping-our-result" id="toc-hyping-our-result" class="nav-link" data-scroll-target="#hyping-our-result">Hyping our result</a></li>
  <li><a href="#the-press-release" id="toc-the-press-release" class="nav-link" data-scroll-target="#the-press-release">The “press release”</a></li>
  <li><a href="#summary" id="toc-summary" class="nav-link" data-scroll-target="#summary">Summary</a></li>
  </ul>
</nav>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<p>This analysis was performed as part of an exercise for my <a href="https://andreashandel.github.io/MADAcourse/">Modern Applied Data Analysis course</a>.</p>
<p>When I taught the course in fall 2019, one of the weekly assignments for the students was to participate in <a href="https://github.com/rfordatascience/tidytuesday">TidyTuesday</a>. I did the exercise as well, this is my product. You can get the R Markdown/Quarto file to re-run the analysis <a href="../../posts/2019-10-02-tidy-tuesday-exploration/index.html">here</a>.</p>
<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>If you are not familiar with TidyTuesday, you can take a quick look <a href="https://andreashandel.github.io/MADAcourse/Data_Analysis_Motivation.html">at the TidyTuesday section on this page</a>.</p>
<p>This week’s data was all about Pizza. More on the data <a href="https://github.com/rfordatascience/tidytuesday/tree/master/data/2019/2019-10-01">is here</a>.</p>
</section>
<section id="loading-packages" class="level1">
<h1>Loading packages</h1>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">'readr'</span>)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">'ggplot2'</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"dplyr"</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"cowplot"</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"plotly"</span>)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"forcats"</span>)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"geosphere"</span>)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"emoji"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="data-loading" class="level1">
<h1>Data loading</h1>
<p>Load date following <a href="https://github.com/rfordatascience/tidytuesday/tree/master/data/2019/2019-10-01">TidyTueday instructions</a>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>pizza_jared <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="st">"https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2019/2019-10-01/pizza_jared.csv"</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>pizza_barstool <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="st">"https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2019/2019-10-01/pizza_barstool.csv"</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>pizza_datafiniti <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(<span class="st">"https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2019/2019-10-01/pizza_datafiniti.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="analysis-ideas" class="level1">
<h1>Analysis Ideas</h1>
<p>See the TidyTuesday website for a codebook. These are 3 datasets. Looks like the 1st dataset is ratings of pizza places through some (online?) survey/poll, the 2nd dataset again has ratings of pizza places from various sources, and the 3rd dataset seems to have fairly overlapping information to the 2nd dataset.</p>
<p>Note: When I looked at the website, the codebook for the 3rd dataset seemed mislabeled. Might be fixed by now.</p>
<p>Possibly interesting questions I can think of:</p>
<ul>
<li>For a given pizza restaurant, how do the different ratings/scores agree or differ?</li>
<li>Are more expensive restaurants overall rated higher?</li>
<li>Is there some systematic dependence of rating on location? Do restaurants located in a certain area in general get rated higher/lower compared to others?</li>
</ul>
<p>I think those are good enough questions to figure out, let’s see how far we get.</p>
</section>
<section id="initial-data-exploration" class="level1">
<h1>Initial data exploration</h1>
<p>Start with a quick renaming and general check.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co">#saves typing</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>d1 <span class="ot">&lt;-</span> pizza_jared </span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>d2 <span class="ot">&lt;-</span> pizza_barstool </span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>d3 <span class="ot">&lt;-</span> pizza_datafiniti </span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(d1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 375
Columns: 9
$ polla_qid   &lt;dbl&gt; 2, 2, 2, 2, 2, 3, 3, 3, 3, 3, 4, 4, 4, 4, 4, 5, 5, 5, 5, 5…
$ answer      &lt;chr&gt; "Excellent", "Good", "Average", "Poor", "Never Again", "Ex…
$ votes       &lt;dbl&gt; 0, 6, 4, 1, 2, 1, 1, 3, 1, 1, 4, 2, 1, 1, 0, 1, 1, 0, 3, 0…
$ pollq_id    &lt;dbl&gt; 2, 2, 2, 2, 2, 3, 3, 3, 3, 3, 4, 4, 4, 4, 4, 5, 5, 5, 5, 5…
$ question    &lt;chr&gt; "How was Pizza Mercato?", "How was Pizza Mercato?", "How w…
$ place       &lt;chr&gt; "Pizza Mercato", "Pizza Mercato", "Pizza Mercato", "Pizza …
$ time        &lt;dbl&gt; 1344361527, 1344361527, 1344361527, 1344361527, 1344361527…
$ total_votes &lt;dbl&gt; 13, 13, 13, 13, 13, 7, 7, 7, 7, 7, 8, 8, 8, 8, 8, 5, 5, 5,…
$ percent     &lt;dbl&gt; 0.0000, 0.4615, 0.3077, 0.0769, 0.1538, 0.1429, 0.1429, 0.…</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(d2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 463
Columns: 22
$ name                                 &lt;chr&gt; "Pugsley's Pizza", "Williamsburg …
$ address1                             &lt;chr&gt; "590 E 191st St", "265 Union Ave"…
$ city                                 &lt;chr&gt; "Bronx", "Brooklyn", "New York", …
$ zip                                  &lt;dbl&gt; 10458, 11211, 10017, 10036, 10003…
$ country                              &lt;chr&gt; "US", "US", "US", "US", "US", "US…
$ latitude                             &lt;dbl&gt; 40.85877, 40.70808, 40.75370, 40.…
$ longitude                            &lt;dbl&gt; -73.88484, -73.95090, -73.97411, …
$ price_level                          &lt;dbl&gt; 1, 1, 1, 2, 2, 1, 1, 1, 2, 2, 1, …
$ provider_rating                      &lt;dbl&gt; 4.5, 3.0, 4.0, 4.0, 3.0, 3.5, 3.0…
$ provider_review_count                &lt;dbl&gt; 121, 281, 118, 1055, 143, 28, 95,…
$ review_stats_all_average_score       &lt;dbl&gt; 8.011111, 7.774074, 5.666667, 5.6…
$ review_stats_all_count               &lt;dbl&gt; 27, 27, 9, 2, 1, 4, 5, 17, 14, 6,…
$ review_stats_all_total_score         &lt;dbl&gt; 216.3, 209.9, 51.0, 11.2, 7.1, 16…
$ review_stats_community_average_score &lt;dbl&gt; 7.992000, 7.742308, 5.762500, 0.0…
$ review_stats_community_count         &lt;dbl&gt; 25, 26, 8, 0, 0, 3, 4, 16, 13, 4,…
$ review_stats_community_total_score   &lt;dbl&gt; 199.8, 201.3, 46.1, 0.0, 0.0, 13.…
$ review_stats_critic_average_score    &lt;dbl&gt; 8.8, 0.0, 0.0, 4.3, 0.0, 0.0, 0.0…
$ review_stats_critic_count            &lt;dbl&gt; 1, 0, 0, 1, 0, 0, 0, 0, 0, 1, 0, …
$ review_stats_critic_total_score      &lt;dbl&gt; 8.8, 0.0, 0.0, 4.3, 0.0, 0.0, 0.0…
$ review_stats_dave_average_score      &lt;dbl&gt; 7.7, 8.6, 4.9, 6.9, 7.1, 3.2, 6.1…
$ review_stats_dave_count              &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, …
$ review_stats_dave_total_score        &lt;dbl&gt; 7.7, 8.6, 4.9, 6.9, 7.1, 3.2, 6.1…</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(d3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 10,000
Columns: 10
$ name            &lt;chr&gt; "Shotgun Dans Pizza", "Sauce Pizza Wine", "Mios Pizzer…
$ address         &lt;chr&gt; "4203 E Kiehl Ave", "25 E Camelback Rd", "3703 Paxton …
$ city            &lt;chr&gt; "Sherwood", "Phoenix", "Cincinnati", "Madison Heights"…
$ country         &lt;chr&gt; "US", "US", "US", "US", "US", "US", "US", "US", "US", …
$ province        &lt;chr&gt; "AR", "AZ", "OH", "MI", "MD", "MD", "CA", "CA", "FL", …
$ latitude        &lt;dbl&gt; 34.83230, 33.50927, 39.14488, 42.51667, 39.28663, 39.2…
$ longitude       &lt;dbl&gt; -92.18380, -112.07304, -84.43269, -83.10663, -76.56698…
$ categories      &lt;chr&gt; "Pizza,Restaurant,American restaurants,Pizza Place,Res…
$ price_range_min &lt;dbl&gt; 0, 0, 0, 25, 0, 0, 0, 0, 0, 0, 25, 25, 25, 25, 0, 0, 0…
$ price_range_max &lt;dbl&gt; 25, 25, 25, 40, 25, 25, 25, 25, 25, 25, 40, 40, 40, 40…</code></pre>
</div>
</div>
<p>The first question I have is if the pizza places in the 3 datasets are the same or at least if there is decent overlap. If not, then one can’t combine the data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>d1names <span class="ot">=</span> <span class="fu">unique</span>(d1<span class="sc">$</span>place)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>d2names <span class="ot">=</span> <span class="fu">unique</span>(d2<span class="sc">$</span>name)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>d3names <span class="ot">=</span> <span class="fu">unique</span>(d3<span class="sc">$</span>name)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(d1names <span class="sc">%in%</span> d2names) <span class="co">#check how many restaurants in d1 are also in d2. Note that this assumes exact spelling.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 22</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(d1names <span class="sc">%in%</span> d3names) <span class="co">#check how many restaurants in d1 are also in d2. Note that this assumes exact spelling.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 9</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(d2names <span class="sc">%in%</span> d3names)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 66</code></pre>
</div>
</div>
<p>22 restaurants out of 56 in dataset 1 are also in dataset 2. Only 9 overlap between dataset 1 and 3. 66 are shared between datasets 2 and 3.</p>
<p>The last dataset has no ratings, and if I look at the overlap of dataset 1 and 2, I only get a few observations. So I think for now I’ll focus on dataset 2 and see if I can address the 3 questions I posed above with just that dataset. Maybe I’ll have ideas for the other 2 datasets as I go along (would be a shame to not use them.)</p>
</section>
<section id="ratings-agreement-analysis" class="level1">
<h1>Ratings agreement analysis</h1>
<p>Ok, I’ll focus on dataset 2 now and look closer at the scores/rating. From the codebook, it’s not quite clear to me what the different scores and counts in dataset 2 actually mean, so let’s look closer to try and figure that out.</p>
<p>From the glimpse function above, I can’t see much of a difference between average and total score. Let’s look at that. Here are a few plots comparing the different score-related variables.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(d2<span class="sc">$</span>review_stats_community_total_score,d2<span class="sc">$</span>review_stats_community_average_score)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/score-explore-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(d2<span class="sc">$</span>review_stats_community_total_score <span class="sc">-</span> d2<span class="sc">$</span>review_stats_community_average_score<span class="sc">*</span> d2<span class="sc">$</span>review_stats_community_count)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/score-explore-2.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(d2<span class="sc">$</span>review_stats_critic_total_score<span class="sc">-</span>d2<span class="sc">$</span>review_stats_critic_average_score)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/score-explore-3.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(d2<span class="sc">$</span>review_stats_dave_total_score<span class="sc">-</span>d2<span class="sc">$</span>review_stats_dave_average_score)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/score-explore-4.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(d2<span class="sc">$</span>review_stats_all_total_score<span class="sc">-</span> (d2<span class="sc">$</span>review_stats_community_total_score<span class="sc">+</span>d2<span class="sc">$</span>review_stats_critic_total_score<span class="sc">+</span>d2<span class="sc">$</span>review_stats_dave_total_score))  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/score-explore-5.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Ok, so based on the plots above, and a few other things I tried, it seems that average score is total score divided by number of counts, and the <em>all</em> score is just the sum of <em>dave</em>, <em>critic</em> and <em>community</em>.</p>
<p>So to address my first question, I’ll look at correlations between average scores for the 3 types of reviewers, namely <em>dave</em>, <em>critic</em> and <em>community</em>.</p>
<p>However, while playing around with the data in the last section, I noticed a problem. Look at the counts for say critics and the average score.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(d2<span class="sc">$</span>review_stats_critic_count)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
  0   1   5 
401  61   1 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(d2<span class="sc">$</span>review_stats_critic_average_score)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
   0    4  4.3  4.5  4.8    5  5.1  5.4  5.5  5.7  5.8  5.9 5.96    6  6.2 6.31 
 401    1    1    1    1    3    1    1    1    1    1    1    1    1    1    1 
 6.5  6.6  6.7 6.76  6.8  6.9    7  7.2  7.3  7.4  7.6 7.76  7.8  7.9    8  8.1 
   3    1    1    1    2    1    5    2    2    1    1    1    2    1    4    2 
 8.5  8.7  8.8    9  9.3  9.4  9.8   10   11 
   3    1    1    1    1    2    1    4    1 </code></pre>
</div>
</div>
<p>A lot of restaurants did not get reviewed by critics, and the score is coded as 0. That’s a problem since if we take averages and such, it will mess up things. This should really be counted as NA. So let’s create new average scores such that any restaurant with no visits/reviews gets an NA as score.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>d2 <span class="ot">&lt;-</span> d2 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>( <span class="at">comm_score =</span> <span class="fu">ifelse</span>(review_stats_community_count <span class="sc">==</span> <span class="dv">0</span> ,<span class="cn">NA</span>,review_stats_community_average_score)) <span class="sc">%&gt;%</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>             <span class="fu">mutate</span>( <span class="at">crit_score =</span> <span class="fu">ifelse</span>(review_stats_critic_count <span class="sc">==</span> <span class="dv">0</span> ,<span class="cn">NA</span>,review_stats_critic_average_score)) <span class="sc">%&gt;%</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>             <span class="fu">mutate</span>( <span class="at">dave_score =</span> <span class="fu">ifelse</span>(review_stats_dave_count <span class="sc">==</span> <span class="dv">0</span> ,<span class="cn">NA</span>,review_stats_dave_average_score)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now let’s plot the 3.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> d2 <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>comm_score, <span class="at">y =</span> crit_score)) <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> d2 <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>comm_score, <span class="at">y =</span> dave_score)) <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>p3 <span class="ot">&lt;-</span> d2 <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>crit_score, <span class="at">y =</span> dave_score)) <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"lm"</span>)</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>cowplot<span class="sc">::</span><span class="fu">plot_grid</span>(p1, p2, p3, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">'A'</span>, <span class="st">'B'</span>,<span class="st">'C'</span>), <span class="at">label_size =</span> <span class="dv">12</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula 'y ~ x'
`geom_smooth()` using formula 'y ~ x'
`geom_smooth()` using formula 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/plot-1-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Looks like there is some agreement between Dave, the critics and the community on the ratings of various pizza places, though there is a good bit of variation.</p>
<p>I think it would be fun to be able to click on specific points to see for a given score which restaurant that is. For instance I’m curious which restaurant has a close to zero score from both the community and Dave (bottom left of plot B).</p>
<p>I think that can be done with plotly, let’s google it.</p>
<p>Ok, figured it out. This re-creates the 3 scatterplots from above and when one moves over the dots, it shows restaurant name.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_ly</span>(d2, <span class="at">x =</span> <span class="sc">~</span>comm_score, <span class="at">y =</span> <span class="sc">~</span>crit_score, <span class="at">text =</span> <span class="sc">~</span><span class="fu">paste</span>(<span class="st">'Restaurant: '</span>, name))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>No trace type specified:
  Based on info supplied, a 'scatter' trace seems appropriate.
  Read more about this trace type -&gt; https://plotly.com/r/reference/#scatter</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>No scatter mode specifed:
  Setting the mode to markers
  Read more about this attribute -&gt; https://plotly.com/r/reference/#scatter-mode</code></pre>
</div>
<div class="cell-output-display">
<div id="htmlwidget-23b810bc8e881fc1d2f4" style="width:100%;height:464px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-23b810bc8e881fc1d2f4">{"x":{"visdat":{"7d0c1991311e":["function () ","plotlyVisDat"]},"cur_data":"7d0c1991311e","attrs":{"7d0c1991311e":{"x":{},"y":{},"text":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20]}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"automargin":true,"title":"comm_score"},"yaxis":{"domain":[0,1],"automargin":true,"title":"crit_score"},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[7.992,6.725,6.5,6.55,5.9,6.8125,6.25,6.375,3,7.45,7.625,6.1,6.675,5.725,6.75,6.475,4.4,5.1,7.00392156862745,6.5,7.77142857142857,6.36428571428571,7.25,7.14285714285714,6.8,8.85862068965517,5.76666666666667,7.4,5.95,5.25,7.3,8.46,5.97272727272727,8.23333333333333,7.025,7.16,6.75,6.4,7.13684210526316,8.28571428571429,8.45,7.63333333333333,7.62307692307692,7.8,8.6,7.55555555555555,7.15,6.85,8.40504201680672,5.92,6.46666666666667,6.0625,7.3,8.225,5.87894736842105,7.2,6.9],"y":[8.8,6.2,4.5,5.8,8.7,8,5,4,6.6,6,9.4,7.2,6.5,10,6.8,7.4,8,8,10,6.31,8.1,7,7.6,8.5,4.8,8.1,5,6.76,10,9,5,7.76,5.5,7.2,6.5,6.8,10,8.5,8,6.7,8.5,7.8,9.3,9.8,11,5.96,5.1,7.3,7.8,7,7,6.9,5.7,9.4,7.3,6.5,7],"text":["Restaurant:  Pugsley's Pizza","Restaurant:  Bond 45","Restaurant:  Dulono's Pizza","Restaurant:  Fat Lorenzo's","Restaurant:  Red's Savoy Pizza","Restaurant:  Frank From Philly & Andrea Pizza","Restaurant:  LA Traviata Pizzeria","Restaurant:  Percy's Pizza","Restaurant:  Mediterraneo Restaurant","Restaurant:  Tre Sorelle","Restaurant:  Napolese Pizzeria","Restaurant:  Bearno's By the Bridge","Restaurant:  The Original Impellizeri's Pizza","Restaurant:  Marcello's Pizza & Subs","Restaurant:  Piu Bello Pizzeria Restaurant","Restaurant:  Buckhead Pizza","Restaurant:  Picasso Pizza","Restaurant:  Pomodoro Pizza","Restaurant:  Majestic Pizza","Restaurant:  Friendly Gourmet Pizza","Restaurant:  Harry's Italian","Restaurant:  Little Italy Pizza","Restaurant:  Phil's Pizza","Restaurant:  Kesté Pizza & Vino","Restaurant:  Napoli Pizza","Restaurant:  Lucali","Restaurant:  Snacks","Restaurant:  Canal Pizza","Restaurant:  Melani Pizzeria","Restaurant:  Il Piccolo Bufalo","Restaurant:  Pomodoro Ristorante & Pizzeria","Restaurant:  Santarpio's Pizza","Restaurant:  Regina Pizzeria","Restaurant:  Nick's Pizza","Restaurant:  PQR","Restaurant:  Vinnie's Pizzeria","Restaurant:  La Mia Pizza","Restaurant:  Manhattan Brick Oven Pizza","Restaurant:  Francesco's Pizzeria","Restaurant:  Arturo's","Restaurant:  Song E Napule","Restaurant:  Sfila Pizza","Restaurant:  Merilu Pizza Al Metro","Restaurant:  Bricco Ristorante Italiano","Restaurant:  Serafina Broadway","Restaurant:  Don Antonio","Restaurant:  Daniela Trattoria","Restaurant:  Patzeria Perfect Pizza","Restaurant:  John's of Times Square","Restaurant:  Radio City Pizza","Restaurant:  Kiss My Slice","Restaurant:  Cassiano's Pizza","Restaurant:  Angelo Bellini","Restaurant:  Jiannetto's Pizza Truck","Restaurant:  Prova Pizzabar","Restaurant:  Giuseppe's Pizza","Restaurant:  Posto"],"type":"scatter","mode":"markers","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"line":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_ly</span>(d2, <span class="at">x =</span> <span class="sc">~</span>comm_score, <span class="at">y =</span> <span class="sc">~</span>dave_score, <span class="at">text =</span> <span class="sc">~</span><span class="fu">paste</span>(<span class="st">'Restaurant: '</span>, name))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>No trace type specified:
  Based on info supplied, a 'scatter' trace seems appropriate.
  Read more about this trace type -&gt; https://plotly.com/r/reference/#scatter
No scatter mode specifed:
  Setting the mode to markers
  Read more about this attribute -&gt; https://plotly.com/r/reference/#scatter-mode</code></pre>
</div>
<div class="cell-output-display">
<div id="htmlwidget-388d672b9da61ed3c1de" style="width:100%;height:464px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-388d672b9da61ed3c1de">{"x":{"visdat":{"7d0c1c622f48":["function () ","plotlyVisDat"]},"cur_data":"7d0c1c622f48","attrs":{"7d0c1c622f48":{"x":{},"y":{},"text":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20]}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"automargin":true,"title":"comm_score"},"yaxis":{"domain":[0,1],"automargin":true,"title":"dave_score"},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[7.992,7.74230769230769,5.7625,4.36666666666667,6.125,7.45,7.35384615384615,6.725,5.79,5.7,6.725,7.23333333333333,8.44444444444444,8.06153846153846,7.47777777777778,8.35714285714286,6.5,5,6.55,5.9,6.8125,8.15454545454545,7.33684210526316,5.72857142857143,7.4,8.14666666666667,6.25,6.375,7.31428571428571,5.94166666666667,5.4,3,7.36666666666667,7.45,5.3,7.1625,6.88,8.4,6.3,6.25,7.92777777777778,4.6,3.1,9.16923076923077,8.07575757575758,6.97857142857143,7.75581395348837,3.33333333333333,7.77777777777778,8.00454545454545,7.425,7.77222222222222,5.2375,7.625,7.73333333333333,10,6.1,6.675,6.92,4.925,5.76666666666667,6.77142857142857,5.42857142857143,8.05,8.1,6.9625,6.97222222222222,6.9,7.6,7.89333333333333,8.01071428571429,7.61428571428571,7.8,6.1,8.1,7.65714285714286,4.25,7.99130434782609,8.16923076923077,7.6,7.8,5.725,6.75,6.475,7.2625,7.2,8.27708333333333,6.1,7.13333333333333,6.3,7.83636363636364,7.48181818181818,6.17894736842105,8.07948717948718,7.84444444444444,8.28141592920354,5.525,7.80606060606061,8.41538461538462,7.75,8.35681818181818,7.6125,6.2,8.29189189189189,7.48888888888889,7.2,8.03076923076923,8.2125,8.44444444444444,7.58684210526316,6.79523809523809,7.73846153846154,4.4,5.1,7.9,3.95714285714286,7.2,5.95,5.82857142857143,6.8,7.64,7.23636363636364,5.8,6.70588235294118,7.00392156862745,7.21666666666667,7.38,6.77333333333333,6.5,6.8,7.77142857142857,7.7,6.36428571428571,9.07380952380952,7.5,4.63333333333333,7.4,7.25,7.97692307692308,7.878125,7.71,7.71111111111111,7.05,7.32826086956522,8.05,7.775,8.88236331569665,7.56666666666667,7.9,8.8,7.14285714285714,6.7,7.54666666666667,7.03846153846154,7.07777777777778,6.44,7.80740740740741,6.8,7.70833333333333,7.6,8.85862068965517,8.53478260869565,5.82857142857143,8.875,8.79473684210526,8.34823529411765,8.92535211267606,6.34,6.97333333333333,8.412,5.16666666666667,5.925,7.84523809523809,7.88181818181818,4.825,4.08181818181818,6.78888888888889,6.12105263157895,5.76666666666667,3.2,7.4,8.19,6.21666666666667,7.10285714285714,5.13333333333333,7.53333333333333,8.4,6.675,6.45,6.82,7.80666666666667,7.47272727272727,7.5,7.25,7.88108108108108,8.40526315789474,8.35694444444444,8.17818181818182,7.64545454545454,8.6,7.78333333333333,5,8.57619047619048,7.85454545454546,7.64545454545454,7.475,7.58333333333333,7.95238095238095,8.52056074766355,8.43703703703704,8.264,8.34590163934426,9.1,4.4,7.26666666666667,7.4,5.95,8.36,7.55454545454545,8.11612903225806,3.65,5.9,7.51111111111111,7.075,6.14545454545454,6.63333333333333,8.2,4.15,5.25,7.2,4.5,7.80714285714286,7.73793103448276,8.1,8.25,7.71818181818182,7.2,7.3,8.60567375886525,8.7025641025641,7.29090909090909,7.8,7.15,7.53684210526316,7.29,8.30697674418605,8.66923076923077,7.63333333333333,8.125,6.8375,8.125,7.58571428571429,8.32,7.24285714285714,7.4,8.1,7.3,6.3,8.06,7.89,8.14,8.70769230769231,6.4,5.95,4.2,8.46,7.5,6.73888888888889,8.1,7.25333333333333,8.71076923076923,7.56666666666667,6.91666666666667,7.50123456790124,7.70416666666667,8.1037037037037,6.68333333333333,7.47619047619048,7.94285714285714,8.67941176470588,3.3625,6.7,8.94117647058824,8.25185185185185,8.545,8.66818181818182,8.2,6.9,6.225,5.97272727272727,8.65443786982248,8.72331606217617,8.94117647058824,7.89791666666667,7.44615384615385,8.02083333333333,9.06363636363636,7.44285714285714,8.23333333333333,7.42,6.7,7.025,7.16,7.80909090909091,6.75,7.25,6.7,7.45769230769231,5.8,7.14285714285714,6.63076923076923,6.4,5.67142857142857,8.08717948717949,7.95714285714286,3.55,5.96666666666667,7.64,8.33333333333333,7.60909090909091,7.13684210526316,5.725,8.38571428571429,8.28571428571429,8.45,7.16666666666667,8.16129032258065,8.29583333333333,7.9,7.63333333333333,7.76521739130435,7.62307692307692,7.8,6.83333333333333,5.6,7.70555555555555,7.975,6.4,7,5.46666666666667,6.86666666666667,8.6,6.55,7.55555555555555,8.63055555555556,4.15,7.5,5.58,3.11666666666667,7.71578947368421,7.15,8.03333333333333,6.85,6.5,8.40504201680672,5.92,4,7.46153846153846,8.94233870967742,3.7,7.88333333333333,7.7,7.225,8.4,4.95,6.16666666666667,6.9,5.6,6.375,7.65,4.03333333333333,5.76666666666667,6.0625,6.3,7.95,6.53333333333333,6.46666666666667,7.62142857142857,7.54444444444445,7.7,6.88571428571429,6.0625,6.0875,4.725,7.73333333333333,6.01111111111111,7.88828828828829,6.3,5.7,6.02857142857143,6.3,6.25,7.3,7.2,6.775,7.2125,6.6,8.36666666666667,6.5,8.225,6.22307692307692,5.02,6.81764705882353,5.87894736842105,7.2,7.64,7.53214285714286,7.86875,6.964,6.1,1,8.2,8.50761904761905,6.18333333333333,6.9,7.68571428571429,7.37,5.23333333333333,6.64,7.721875,6.15,7.03333333333333],"y":[7.7,8.6,4.9,3.2,6.1,7.2,6.8,6.5,6.5,6.4,6.6,7.5,8.6,7.8,7.2,7.5,6.3,3.4,4.1,7.1,6.3,7.6,6.8,5.3,6.8,7.1,5.4,6.1,7.6,4.2,6.2,5.8,7.1,6.7,3.4,6.8,6.9,7.2,6.7,6.3,7.7,8.5,3.2,6.8,8.4,6.2,8.2,1.1,7.1,7.4,7.1,8.1,5.1,4.1,7.1,5.2,6.4,5.8,0.2,3.1,5.4,6.8,1.2,7.6,7.8,5.4,6.9,6.4,1.2,7.4,7.8,6.5,6.1,6.4,7.2,7.1,7.2,8.3,7.1,6.8,6.1,7.4,5.9,7.2,7.1,7.2,8.3,6.8,6.4,6.6,7.5,7.5,6.5,8.3,7.5,8.9,1.9,7.5,7.9,6.6,8.1,7.8,7.2,7.9,6.8,6.8,6.2,7.2,7.6,8.1,6.8,7.4,4.2,4.2,6.8,2.2,7.4,3.3,6.4,5.9,7.4,4.8,2.5,7.1,7.1,5.9,8.1,7.4,4.8,7.2,7.7,7.8,6.3,9.3,7.9,3.4,7.8,7.7,8.2,7.9,8.2,7.2,6.2,6.9,7.6,8.1,9.3,7.4,7.8,8.2,6.4,2.4,7.1,5.8,4.8,5.5,7.9,6.6,5.1,6.9,8.1,8.9,6.9,2.2,8.1,7.4,9.4,7.5,7.4,8.1,6.7,5.4,8.3,8.2,3.2,3.2,6.2,3.4,5,7.8,5.6,7.2,5.9,7.3,7.8,8.2,8.6,7.4,6.1,7.3,8.1,7.2,6.3,7.2,7.9,8.1,7.8,8.6,7.4,6.7,7.4,6.6,8,6.8,7.8,6.7,7.9,7.9,9.1,8,6.9,8.7,7.4,6.2,7.4,1.7,6.8,7.3,8.3,8.6,2.4,6.1,8,5.8,5.1,6.2,7.4,4.8,7.4,5.8,5.9,8.5,8.1,7.4,7.3,6.2,8.1,4.2,8.6,8.1,7.2,8.1,4.8,8.2,7.3,8,8.4,6.6,7.1,7.3,7.7,7.5,9.3,8,7.4,8.6,7.2,5.9,6.2,7.6,10,8.2,6.8,3.8,6.1,8.2,6.9,6.7,6.6,5.8,9.1,7.74,6.8,9.2,8.2,9.2,5.2,7.1,6.7,8,2.4,6.2,8.5,7.5,9,9.4,8.5,6.6,6.4,6.4,8.8,8.5,9.2,7.4,8.2,8.4,9.1,6.2,6.6,7.3,6.9,6.1,7.1,7.8,6.7,7.7,6.2,8.4,1.8,4,7.2,7.9,6.5,8.5,7.9,7.1,6.2,8.1,8.3,8.1,8.1,6.2,7.6,7.9,7.7,7,9,8.5,7.2,7.7,8.1,8.2,6.8,7.1,3.7,8.4,8.1,6.3,7.1,5.8,2.1,7.3,6.4,6.4,9.3,3.1,4.8,4.1,4.1,8.1,3.6,7.1,5,4.8,8.4,6.1,6.3,8.4,9.1,8.1,7.8,7.7,4.6,6.9,6.9,6.2,6.9,1.7,1.4,6.9,4.2,6.2,7.8,6.6,7.4,7.3,6.3,7.3,7.4,7.9,7.3,6.6,6.7,6.4,7.1,7.8,8.2,7.7,7.9,5.4,5.2,4.3,5.7,6.6,6.2,7.8,6.8,8.6,8.4,8.1,5.1,4.9,7.5,7.4,6.2,6.8,7.1,8.1,7.4,5.7,0.08,8.1,9.3,2.8,6.8,7.9,7.7,5.9,3.9,8.2,6.8,8.2],"text":["Restaurant:  Pugsley's Pizza","Restaurant:  Williamsburg Pizza","Restaurant:  99 Cent Fresh Pizza","Restaurant:  La Gusto Pizza","Restaurant:  Cheesy Pizza","Restaurant:  Sal & Carmine's Pizza","Restaurant:  MAMA'S TOO!","Restaurant:  Bond 45","Restaurant:  Casa D'amici","Restaurant:  Pizza Al's","Restaurant:  Colasante's Ristorante & Pub","Restaurant:  Love & Dough","Restaurant:  Patsy's Pizzeria","Restaurant:  Louie & Ernie's Pizza","Restaurant:  Pizza Barn","Restaurant:  Mama's Pizza","Restaurant:  Dulono's Pizza","Restaurant:  Cheetah Pizza","Restaurant:  Fat Lorenzo's","Restaurant:  Red's Savoy Pizza","Restaurant:  Frank From Philly & Andrea Pizza","Restaurant:  Young Joni","Restaurant:  Cossetta Alimentari","Restaurant:  Pizza Luce","Restaurant:  Football Pizza","Restaurant:  Star Tavern","Restaurant:  LA Traviata Pizzeria","Restaurant:  Percy's Pizza","Restaurant:  Pizza Land","Restaurant:  Little Italy Pizza","Restaurant:  B & W Deli & Pizzeria","Restaurant:  Mediterraneo Restaurant","Restaurant:  La Bellezza Pizza","Restaurant:  Tre Sorelle","Restaurant:  Justino's Pizzeria","Restaurant:  Casabianca Pizzeria","Restaurant:  Mariella Pizza","Restaurant:  Bella Blu","Restaurant:  John & Tony's","Restaurant:  Il Forno Pizza","Restaurant:  Scarr's Pizza","Restaurant:  Double Zero","Restaurant:  Rico's Pizza","Restaurant:  Palermo's 95th","Restaurant:  Giordano's","Restaurant:  Gino's East - Magnificent Mile","Restaurant:  Lou Malnati's Pizzeria","Restaurant:  Georgio's Gourmet Pizza","Restaurant:  Armand's Pizzeria","Restaurant:  Pequod's Pizzeria","Restaurant:  Geo's Pizza","Restaurant:  Goodfellas Pizzeria","Restaurant:  BazbeauxPizza","Restaurant:  Napolese Pizzeria","Restaurant:  The Wig & Pen Pizza Pub","Restaurant:  Casey's General Store","Restaurant:  Bearno's By the Bridge","Restaurant:  The Original Impellizeri's Pizza","Restaurant:  The Post","Restaurant:  Cottage Inn Pizza - Ann Arbor","Restaurant:  New York Pizza Depot","Restaurant:  Pizza House","Restaurant:  Backroom Pizza","Restaurant:  Buddy's Pizza","Restaurant:  Leone's Pizza","Restaurant:  Adriatico's New York Style Pizza","Restaurant:  Sicilia Fine Italian Specialties","Restaurant:  The O Patio & Pub","Restaurant:  Catfish Biff's Pizza & Subs","Restaurant:  GoreMade Pizza","Restaurant:  Pies & Pints - Lexington","Restaurant:  Pazzo's Pizza Pub","Restaurant:  PieTana","Restaurant:  Bruno Bros Pizza","Restaurant:  Wedgewood Fernando's Pizza - Austintown","Restaurant:  Avalon Downtown Pizzeria","Restaurant:  Sparky's Pizzeria and Grill","Restaurant:  Black Sheep Pizza - Minneapolis","Restaurant:  Benny Marzano's","Restaurant:  Imperial Pizza","Restaurant:  Mellow Mushroom","Restaurant:  Marcello's Pizza & Subs","Restaurant:  Piu Bello Pizzeria Restaurant","Restaurant:  Buckhead Pizza","Restaurant:  Cosmo's Original Little Italy Pizza","Restaurant:  Fellini's Pizza","Restaurant:  Antico Pizza","Restaurant:  Slice Downtown","Restaurant:  Hawthorne's NY Pizza & Bar","Restaurant:  Pizza Joint","Restaurant:  Empire Slice House","Restaurant:  Santucci's Original Square Pizza","Restaurant:  Lorenzo & Sons Pizza","Restaurant:  Santillo's Brick Oven Pizza","Restaurant:  Kinchley's Tavern","Restaurant:  Ralph's Pizzeria","Restaurant:  Costco","Restaurant:  Pizza Town USA","Restaurant:  Brother's Pizzeria","Restaurant:  Mama Rosa Pizza and Pasta","Restaurant:  Denino's Pizzeria Tavern","Restaurant:  The New Park Tavern","Restaurant:  Vesta Wood Fired Pizza & Bar","Restaurant:  Lee's Tavern","Restaurant:  The Original Goodfella's Brick Oven Pizza","Restaurant:  Tony Boloney's","Restaurant:  Krispy Pizza","Restaurant:  Mario's Classic Pizza","Restaurant:  Johnny Pepperoni","Restaurant:  Basile's Pizza","Restaurant:  Benny Tudino's Pizzeria","Restaurant:  Napoli's Brick Oven Pizza","Restaurant:  Picasso Pizza","Restaurant:  Pomodoro Pizza","Restaurant:  SIMÒ PIZZA","Restaurant:  Steve's Pizza","Restaurant:  The Woodstock","Restaurant:  The Grotto Pizzeria & Ristorante","Restaurant:  Georgio Pizzeria","Restaurant:  Pranzo Pizza & Pasta","Restaurant:  Justino's Pizzeria","Restaurant:  Adrienne's Pizzabar","Restaurant:  Da Vinci Pizza","Restaurant:  Cucina Bene","Restaurant:  Majestic Pizza","Restaurant:  Underground Pizza","Restaurant:  Neapolitan Express","Restaurant:  Stage Door Pizza","Restaurant:  Friendly Gourmet Pizza","Restaurant:  Dona Bella Pizza","Restaurant:  Harry's Italian","Restaurant:  Adoro Lei","Restaurant:  Little Italy Pizza","Restaurant:  Lucali","Restaurant:  Il Mattone West Village","Restaurant:  5 Boroughs Pizza","Restaurant:  Serafina Meatpacking","Restaurant:  Phil's Pizza","Restaurant:  Saluggi's","Restaurant:  Artichoke Basille's Pizza","Restaurant:  Brunetti Pizza","Restaurant:  Emily - West Village","Restaurant:  Black Square Pizza","Restaurant:  Bleecker Street Pizza","Restaurant:  Enzo Bruni La Pizza Gourmet","Restaurant:  Famous Ben's Pizza","Restaurant:  John's of Bleecker Street","Restaurant:  Filaga Pizzeria","Restaurant:  Emmett's","Restaurant:  Numero 28 Pizzeria - West Village","Restaurant:  Kesté Pizza & Vino","Restaurant:  King's Pizza","Restaurant:  Eddie & Sam's NY Pizza","Restaurant:  Home Slice Pizza","Restaurant:  Big Lou's Pizza","Restaurant:  Pizzarita's","Restaurant:  Julian's Italian Pizzeria & Kitchen","Restaurant:  Napoli Pizza","Restaurant:  Biggie's Pizza","Restaurant:  Steve's Pizza","Restaurant:  Lucali","Restaurant:  Mister O1- South Beach","Restaurant:  Pizza Girls WPB","Restaurant:  Pizza Al Fresco","Restaurant:  Totonno's","Restaurant:  L & B Spumoni Gardens","Restaurant:  Di Fara Pizza","Restaurant:  Da Nonna Rosa","Restaurant:  Ciro's Pizzeria & Beerhouse","Restaurant:  Bronx Pizza","Restaurant:  Filippi's Pizza Grotto Pacific Beach","Restaurant:  Manhattan Pizzeria","Restaurant:  Joe's Pizza","Restaurant:  Vito's Pizza","Restaurant:  Bonanno's New York Pizzeria","Restaurant:  Bonanno's New York Pizzeria","Restaurant:  Five50 Pizza Bar","Restaurant:  Secret Pizza","Restaurant:  Snacks","Restaurant:  XS Nightclub","Restaurant:  Naked City Pizza Shop","Restaurant:  Good Pie","Restaurant:  Evel Pie","Restaurant:  Pizza Rock","Restaurant:  Acquolina","Restaurant:  Pope's Italian Restaurant","Restaurant:  Nove Italian Restaurant","Restaurant:  Mama Mia's Restaurant","Restaurant:  Marino's Pizza","Restaurant:  Gennaro's Pizza Parlor","Restaurant:  Caputo's Pizzeria","Restaurant:  Corner Slice","Restaurant:  Francesca's Restaurant & Pizzeria","Restaurant:  Café Crust","Restaurant:  Borrelli's","Restaurant:  King Umberto's of Elmont","Restaurant:  New Park Pizza","Restaurant:  Umberto's Pizzeria & Restaurant","Restaurant:  Dani's House of Pizza","Restaurant:  Rosa's Pizza","Restaurant:  Brooklyn's Homeslice Pizzeria","Restaurant:  Not Ray's Pizza","Restaurant:  Roberta's","Restaurant:  Little Vincent's Pizza","Restaurant:  Carmine's Pizzeria","Restaurant:  Sal's Pizzeria","Restaurant:  Tony's Pizza","Restaurant:  L'industrie Pizzeria","Restaurant:  Best Pizza","Restaurant:  Grimaldi's","Restaurant:  Juliana's Pizza","Restaurant:  Ignazio's","Restaurant:  La Nonna Krispy Krust Pizza","Restaurant:  Alphonso's Pizzeria & Trattoria","Restaurant:  Paulie Gee's Slice Shop","Restaurant:  Canal Pizza","Restaurant:  Melani Pizzeria","Restaurant:  Paulie Gee's","Restaurant:  Speedy Romeo","Restaurant:  Rizzo's Fine Pizza","Restaurant:  Stanton Pizza","Restaurant:  Solo Pizza","Restaurant:  La Margarita Pizza","Restaurant:  Luna Ristorante","Restaurant:  Rosario's Pizza","Restaurant:  Da Gennaro","Restaurant:  Margherita NYC","Restaurant:  Yankee Pizza","Restaurant:  Il Piccolo Bufalo","Restaurant:  Da Nico Ristorante","Restaurant:  Little Gio's Pizza","Restaurant:  Lil' Frankie's","Restaurant:  Sal's Little Italy","Restaurant:  Gnocco","Restaurant:  Pasquale Jones","Restaurant:  Lombardi's Pizza","Restaurant:  Champion Pizza","Restaurant:  Pomodoro Ristorante & Pizzeria","Restaurant:  Prince Street Pizza","Restaurant:  Rubirosa","Restaurant:  Proto's Pizza","Restaurant:  310 Bowery Bar","Restaurant:  La Rossa","Restaurant:  Stromboli Pizza","Restaurant:  Baker's Pizza","Restaurant:  East Village Pizza","Restaurant:  Joe & Pat's Pizzeria","Restaurant:  Muzzarella Pizza","Restaurant:  Sorbillo Pizzeria","Restaurant:  Joey's Pizzeria","Restaurant:  Pizza Barbone","Restaurant:  Palio Pizzeria","Restaurant:  Oath Pizza - Nantucket","Restaurant:  Steamboat Wharf Pizza","Restaurant:  Fusaro's","Restaurant:  Pi Pizzeria","Restaurant:  Sophie T's Pizza","Restaurant:  Muse Pizza","Restaurant:  Moto Pizza","Restaurant:  Poopsie's","Restaurant:  Monte's Restaurant","Restaurant:  Bianchi's Pizza","Restaurant:  Giordano's Restaurant","Restaurant:  Slice Of Edgartown","Restaurant:  Isola","Restaurant:  Santarpio's Pizza","Restaurant:  Rocco's Pizzeria","Restaurant:  Rinas Pizzeria & Cafe","Restaurant:  Galleria Umberto","Restaurant:  Pushcart Pizzeria","Restaurant:  Regina Pizzeria","Restaurant:  Ducali","Restaurant:  1000 Degrees Neapolitan Pizzeria","Restaurant:  Halftime Pizza","Restaurant:  Florina Pizzeria & Paninoteca","Restaurant:  Rosie's Subs and Pizza","Restaurant:  Felcaro Pizzeria","Restaurant:  Dirty Water Dough","Restaurant:  Eataly Boston","Restaurant:  Lynwood Cafe","Restaurant:  Fenway Park","Restaurant:  Baldie's Pizza & Subs","Restaurant:  Cape Cod Cafe","Restaurant:  Louie's Pizza","Restaurant:  Town Spa Pizza","Restaurant:  Frank Pepe Pizzeria Napoletana - Chestnut Hill","Restaurant:  Tony's Place","Restaurant:  Chilmark General Store","Restaurant:  Bill's Pizzeria Kitchen + Grille","Restaurant:  Regina Pizzeria","Restaurant:  Modern Apizza","Restaurant:  Frank Pepe Pizzeria Napoletana","Restaurant:  Sally's Apizza","Restaurant:  BAR","Restaurant:  Riko's Pizza","Restaurant:  Colony Grill","Restaurant:  Johnny's Pizzeria","Restaurant:  Full Moon Pizzeria","Restaurant:  Nick's Pizza","Restaurant:  Pie Pie Pizza","Restaurant:  Mama's Pizzeria","Restaurant:  PQR","Restaurant:  Vinnie's Pizzeria","Restaurant:  Salvo's Pizzabar","Restaurant:  La Mia Pizza","Restaurant:  Italian Village Pizzeria","Restaurant:  Broadway Pizza & Restaurant","Restaurant:  Saba's Pizza","Restaurant:  Cafe Viva","Restaurant:  Pizza Park","Restaurant:  Pizza Pete's","Restaurant:  Manhattan Brick Oven Pizza","Restaurant:  Oath Pizza - East 67th Street","Restaurant:  Brooklyn Pizza Masters","Restaurant:  Made In New York Pizza","Restaurant:  Kiss My Slice","Restaurant:  Farinella Bakery Pizza","Restaurant:  Cafe Daniello's","Restaurant:  Gato","Restaurant:  Freddie & Pepper's","Restaurant:  Francesco's Pizzeria","Restaurant:  Iggy's Pizzeria","Restaurant:  Motorino","Restaurant:  Arturo's","Restaurant:  Song E Napule","Restaurant:  Fiore's Pizza","Restaurant:  Denino's Greenwich Village","Restaurant:  Joe's Pizza","Restaurant:  Cafe Fiorello","Restaurant:  Sfila Pizza","Restaurant:  Sacco Pizza","Restaurant:  Merilu Pizza Al Metro","Restaurant:  Bricco Ristorante Italiano","Restaurant:  New York Sal's Pizza","Restaurant:  Mariella Pizza","Restaurant:  Luigi's Pizza","Restaurant:  Luigi's Gourmet Grill","Restaurant:  B Side Pizza & Wine Bar","Restaurant:  Uncle Mario's Brick Oven Pizza","Restaurant:  Bella Vita Pizzeria","Restaurant:  IPizzaNY","Restaurant:  Serafina Broadway","Restaurant:  Claudio Pizzeria","Restaurant:  Don Antonio","Restaurant:  Angelo's Coal Oven Pizzeria","Restaurant:  Z Deli Pizzeria","Restaurant:  Pazza Notte","Restaurant:  Carve","Restaurant:  A Slice of New York","Restaurant:  PizzArte","Restaurant:  Daniela Trattoria","Restaurant:  Capizzi","Restaurant:  Patzeria Perfect Pizza","Restaurant:  Pasta Lovers","Restaurant:  John's of Times Square","Restaurant:  Radio City Pizza","Restaurant:  Tavola","Restaurant:  Vinny Vincenz","Restaurant:  Sauce Pizzeria","Restaurant:  Pisa Pizza","Restaurant:  Frank's Trattoria","Restaurant:  Pepe Giallo","Restaurant:  Don Giovanni Ristorante","Restaurant:  Ovest Pizzoteca by Luzzo's","Restaurant:  10th Avenue Pizza & Cafe","Restaurant:  Stella's Pizza","Restaurant:  Gotham Pizza","Restaurant:  Highline Pizza","Restaurant:  Rocky's Pizza 14th St","Restaurant:  Village Pizza","Restaurant:  Pizza Italia","Restaurant:  Famous Original Ray's Pizza","Restaurant:  Rivoli Pizza","Restaurant:  Pizza Rollio","Restaurant:  Rosemary's Pizza","Restaurant:  Teresa's Brick Oven Pizza & Cafe","Restaurant:  Kiss My Slice","Restaurant:  Harry's Italian Pizza Bar","Restaurant:  Upside Pizza","Restaurant:  Sofia Pizza Shoppe","Restaurant:  Marinara Pizza","Restaurant:  Cassiano's Pizza","Restaurant:  Primavera Pizza & Pasta","Restaurant:  Belmora Pizza & Restaurant","Restaurant:  Zia Maria-Chelsea","Restaurant:  Joe's Pizza","Restaurant:  NY Pizza Suprema","Restaurant:  3 Giovani","Restaurant:  Rock Pizza Scissors","Restaurant:  Ben's Pizzeria","Restaurant:  Olio e Piú","Restaurant:  My Pie Pizzeria Romana","Restaurant:  Angelo Bellini","Restaurant:  Pizza By Certé","Restaurant:  La Vera Pizzeria & Restaurant","Restaurant:  La Bellezza","Restaurant:  La Trattoria","Restaurant:  Patsy's Pizzeria","Restaurant:  Picciotto NYC","Restaurant:  Jiannetto's Pizza Truck","Restaurant:  Uncle Paul's Pizza","Restaurant:  Previti Pizza","Restaurant:  Royal Pizza","Restaurant:  Prova Pizzabar","Restaurant:  Giuseppe's Pizza","Restaurant:  Garlic New York Pizza Bar","Restaurant:  Lions & Tigers & Squares Detroit Pizza","Restaurant:  Lombardi's pizza","Restaurant:  Famous Famiglia Pizzeria","Restaurant:  Famous Amadeus Pizza","Restaurant:  Amtrak","Restaurant:  Nicoletta Pizzeria","Restaurant:  Lazzara's Pizza","Restaurant:  Rocky's Number II","Restaurant:  Posto","Restaurant:  Patrizia's Pizza and Pasta","Restaurant:  Mike's Pizza","Restaurant:  Joey Pepperoni's Pizza","Restaurant:  Libretto's Pizzeria","Restaurant:  Brick Oven Pizza 33","Restaurant:  J's Pizza","Restaurant:  Rocco's Pizza Joint"],"type":"scatter","mode":"markers","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"line":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_ly</span>(d2, <span class="at">x =</span> <span class="sc">~</span>crit_score, <span class="at">y =</span> <span class="sc">~</span>dave_score, <span class="at">text =</span> <span class="sc">~</span><span class="fu">paste</span>(<span class="st">'Restaurant: '</span>, name))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>No trace type specified:
  Based on info supplied, a 'scatter' trace seems appropriate.
  Read more about this trace type -&gt; https://plotly.com/r/reference/#scatter
No scatter mode specifed:
  Setting the mode to markers
  Read more about this attribute -&gt; https://plotly.com/r/reference/#scatter-mode</code></pre>
</div>
<div class="cell-output-display">
<div id="htmlwidget-12111961384609778ef6" style="width:100%;height:464px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-12111961384609778ef6">{"x":{"visdat":{"7d0c33373806":["function () ","plotlyVisDat"]},"cur_data":"7d0c33373806","attrs":{"7d0c33373806":{"x":{},"y":{},"text":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20]}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"xaxis":{"domain":[0,1],"automargin":true,"title":"crit_score"},"yaxis":{"domain":[0,1],"automargin":true,"title":"dave_score"},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[8.8,4.3,6.2,4.5,5.8,8.7,8,5,4,7.9,6.6,6,7,9.4,7.2,6.5,10,6.8,7.4,8,8,10,6.31,8.1,7,7.6,8.5,4.8,8.1,5,5.4,6.76,10,9,5,7.76,5.5,7.2,6.5,6.8,10,8.5,8,6.7,8.5,7.8,9.3,9.8,11,5.96,5.1,7.3,7.8,7,7,6.9,5.7,9.4,5.9,7.3,6.5,7],"y":[7.7,6.9,6.5,6.3,4.1,7.1,6.3,5.4,6.1,7.1,5.8,6.7,1.2,4.1,6.4,5.8,7.4,5.9,7.2,4.2,4.2,7.1,4.8,7.7,6.3,7.7,6.4,6.6,8.1,5,5.4,1.7,6.8,7.4,4.2,8.2,6.4,6.6,6.1,7.1,6.7,7.9,8.1,7.9,7.7,7.7,8.2,6.8,7.3,6.4,3.6,5,8.4,6.1,6.3,6.6,5.7,8.1,6.1,7.4,6.2,6.8],"text":["Restaurant:  Pugsley's Pizza","Restaurant:  Nino's 46","Restaurant:  Bond 45","Restaurant:  Dulono's Pizza","Restaurant:  Fat Lorenzo's","Restaurant:  Red's Savoy Pizza","Restaurant:  Frank From Philly & Andrea Pizza","Restaurant:  LA Traviata Pizzeria","Restaurant:  Percy's Pizza","Restaurant:  Re Sette","Restaurant:  Mediterraneo Restaurant","Restaurant:  Tre Sorelle","Restaurant:  Buca di Beppo Italian Restaurant","Restaurant:  Napolese Pizzeria","Restaurant:  Bearno's By the Bridge","Restaurant:  The Original Impellizeri's Pizza","Restaurant:  Marcello's Pizza & Subs","Restaurant:  Piu Bello Pizzeria Restaurant","Restaurant:  Buckhead Pizza","Restaurant:  Picasso Pizza","Restaurant:  Pomodoro Pizza","Restaurant:  Majestic Pizza","Restaurant:  Friendly Gourmet Pizza","Restaurant:  Harry's Italian","Restaurant:  Little Italy Pizza","Restaurant:  Phil's Pizza","Restaurant:  Kesté Pizza & Vino","Restaurant:  Napoli Pizza","Restaurant:  Lucali","Restaurant:  Snacks","Restaurant:  42nd Street Pizza","Restaurant:  Canal Pizza","Restaurant:  Melani Pizzeria","Restaurant:  Il Piccolo Bufalo","Restaurant:  Pomodoro Ristorante & Pizzeria","Restaurant:  Santarpio's Pizza","Restaurant:  Regina Pizzeria","Restaurant:  Nick's Pizza","Restaurant:  PQR","Restaurant:  Vinnie's Pizzeria","Restaurant:  La Mia Pizza","Restaurant:  Manhattan Brick Oven Pizza","Restaurant:  Francesco's Pizzeria","Restaurant:  Arturo's","Restaurant:  Song E Napule","Restaurant:  Sfila Pizza","Restaurant:  Merilu Pizza Al Metro","Restaurant:  Bricco Ristorante Italiano","Restaurant:  Serafina Broadway","Restaurant:  Don Antonio","Restaurant:  Daniela Trattoria","Restaurant:  Patzeria Perfect Pizza","Restaurant:  John's of Times Square","Restaurant:  Radio City Pizza","Restaurant:  Kiss My Slice","Restaurant:  Cassiano's Pizza","Restaurant:  Angelo Bellini","Restaurant:  Jiannetto's Pizza Truck","Restaurant:  Deli On Madison","Restaurant:  Prova Pizzabar","Restaurant:  Giuseppe's Pizza","Restaurant:  Posto"],"type":"scatter","mode":"markers","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"line":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>So apparently the lousy restaurant that got a 1 from the community and almost 0 from Dave is called <em>Amtrak</em>. I’m wondering if that refers to pizza on Amtrak trains? Just for the heck of it and because I’m curious, let’s look at that entry.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>d2 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(name <span class="sc">==</span> <span class="st">"Amtrak"</span>) <span class="sc">%&gt;%</span> knitr<span class="sc">::</span><span class="fu">kable</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped">
<colgroup>
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 1%">
<col style="width: 2%">
<col style="width: 3%">
<col style="width: 4%">
<col style="width: 6%">
<col style="width: 4%">
<col style="width: 5%">
<col style="width: 7%">
<col style="width: 5%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 5%">
<col style="width: 6%">
<col style="width: 6%">
<col style="width: 4%">
<col style="width: 5%">
<col style="width: 2%">
<col style="width: 2%">
<col style="width: 2%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">name</th>
<th style="text-align: left;">address1</th>
<th style="text-align: left;">city</th>
<th style="text-align: right;">zip</th>
<th style="text-align: left;">country</th>
<th style="text-align: right;">latitude</th>
<th style="text-align: right;">longitude</th>
<th style="text-align: right;">price_level</th>
<th style="text-align: right;">provider_rating</th>
<th style="text-align: right;">provider_review_count</th>
<th style="text-align: right;">review_stats_all_average_score</th>
<th style="text-align: right;">review_stats_all_count</th>
<th style="text-align: right;">review_stats_all_total_score</th>
<th style="text-align: right;">review_stats_community_average_score</th>
<th style="text-align: right;">review_stats_community_count</th>
<th style="text-align: right;">review_stats_community_total_score</th>
<th style="text-align: right;">review_stats_critic_average_score</th>
<th style="text-align: right;">review_stats_critic_count</th>
<th style="text-align: right;">review_stats_critic_total_score</th>
<th style="text-align: right;">review_stats_dave_average_score</th>
<th style="text-align: right;">review_stats_dave_count</th>
<th style="text-align: right;">review_stats_dave_total_score</th>
<th style="text-align: right;">comm_score</th>
<th style="text-align: right;">crit_score</th>
<th style="text-align: right;">dave_score</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Amtrak</td>
<td style="text-align: left;">234 W 31st St</td>
<td style="text-align: left;">New York</td>
<td style="text-align: right;">10001</td>
<td style="text-align: left;">US</td>
<td style="text-align: right;">40.74965</td>
<td style="text-align: right;">-73.9934</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">345</td>
<td style="text-align: right;">0.54</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">1.08</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">0.08</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">0.08</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">NA</td>
<td style="text-align: right;">0.08</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>I googled the address, and it seems to be indeed Amtrak. Note to self: Never order pizza on an Amtrak train.</p>
</section>
<section id="price-vs-ratings-analysis" class="level1">
<h1>Price vs ratings analysis</h1>
<p>Next, let’s look at possible impact of restaurant price level on rating.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(d2<span class="sc">$</span>price_level)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
  0   1   2   3 
 21 216 218   8 </code></pre>
</div>
</div>
<p>There isn’t much spread, most pizza places are in the middle. Maybe not too surprising. Let’s look at a few plots to see if there is a pattern. First, we should recode price level as a factor.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>d2 <span class="ot">&lt;-</span> d2 <span class="sc">%&gt;%</span> <span class="fu">mutate</span>(<span class="at">price =</span> <span class="fu">as.factor</span>(price_level))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> d2 <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>price, <span class="at">y=</span>comm_score)) <span class="sc">+</span> <span class="fu">geom_violin</span>() <span class="sc">+</span> <span class="fu">geom_point</span>()</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> d2 <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>price, <span class="at">y=</span>crit_score)) <span class="sc">+</span> <span class="fu">geom_violin</span>() <span class="sc">+</span> <span class="fu">geom_point</span>()</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>p3 <span class="ot">&lt;-</span> d2 <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>price, <span class="at">y=</span>dave_score)) <span class="sc">+</span> <span class="fu">geom_violin</span>() <span class="sc">+</span> <span class="fu">geom_point</span>()</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>cowplot<span class="sc">::</span><span class="fu">plot_grid</span>(p1, p2, p3, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">'A'</span>, <span class="st">'B'</span>,<span class="st">'C'</span>), <span class="at">label_size =</span> <span class="dv">12</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/price-plot-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Hard to tell if there’s a trend. Could do some stats to look in more detail, but since this exercise focuses on exploring, I won’t do that. Instead I’ll leave it at that.</p>
</section>
<section id="rating-versus-location" class="level1">
<h1>Rating versus location</h1>
<p>Ok, on to the last of the questions I started out with. Maybe there are some areas where restaurants are in general better? Or maybe an area where diners are more critical? Let’s see if there is some correlation between ratings and location.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(d2<span class="sc">$</span>country)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
 US 
463 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sort</span>(<span class="fu">table</span>(d2<span class="sc">$</span>city))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
        Alpharetta            Augusta             Austin         Austintown 
                 1                  1                  1                  1 
        Blacksburg          Braintree           Brockton            Buffalo 
                 1                  1                  1                  1 
        Charleston          Charlotte      Chestnut Hill           Chilmark 
                 1                  1                  1                  1 
        Clearwater            Clifton         Coralville      Daytona Beach 
                 1                  1                  1                  1 
          Dearborn        Dennis Port              DUMBO        East Meadow 
                 1                  1                  1                  1 
             Edina          Elizabeth             Elmont         Gansevoort 
                 1                  1                  1                  1 
              Gary       Hampton Bays          Hopkinton       Howard Beach 
                 1                  1                  1                  1 
        Huntington          Iowa City            Jackson Jacksonville Beach 
                 1                  1                  1                  1 
       Jersey City        Kew Gardens          Lakeville      Lawrenceville 
                 1                  1                  1                  1 
              Lynn    Manhattan Beach       Mashantucket              Miami 
                 1                  1                  1                  1 
    Middle Village       Mount Vernon      New Hyde Park      New York City 
                 1                  1                  1                  1 
   North Arlington             Nutley         Oak Bluffs           Oak Lawn 
                 1                  1                  1                  1 
     Oklahoma City             Orange         Palm Beach           Pembroke 
                 1                  1                  1                  1 
         Princeton             Ramsey           Randolph             Revere 
                 1                  1                  1                  1 
        Rutherford      San Francisco           Sandwich        Southampton 
                 1                  1                  1                  1 
         Stoughton              Tampa     Vineyard Haven     West Melbourne 
                 1                  1                  1                  1 
   West Palm Beach       West Roxbury             Woburn            Yonkers 
                 1                  1                  1                  1 
   East Rutherford          Edgartown       Elmwood Park            Hyannis 
                 2                  2                  2                  2 
       Miami Beach       Philadelphia         Saint Paul       Santa Monica 
                 2                  2                  2                  2 
          Stamford              Bronx       Indianapolis          Lexington 
                 2                  3                  3                  3 
        Morgantown        San Antonio          San Diego          Ann Arbor 
                 3                  3                  3                  4 
        Louisville          New Haven      Staten Island         Youngstown 
                 4                  4                  4                  4 
           Atlanta            Chicago           Columbus            Hoboken 
                 6                  6                  6                  6 
         Nantucket   Saratoga Springs        Minneapolis          Las Vegas 
                 6                  6                  8                 11 
            Boston           Brooklyn           New York 
                13                 20                251 </code></pre>
</div>
</div>
<p>Ok so all restaurants are in the US, and most are in New York. We could look at NY versus “rest of the cities”. Though isn’t Brooklyn (the 2nd largest entry) basically a part of New York? I’m not enough of an expert on all things NY to be sure (<strong>for any real analysis, you need to know a good bit about the subject matter, or work closely with a subject matter expert. If not, more likely than not something dumb will happen</strong>).</p>
<p>For now, I assume that it’s different enough, and make 2 categories, NY and “other” and see if there are differences. Let’s try.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> d2 <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">newcity =</span> forcats<span class="sc">::</span><span class="fu">fct_lump</span>(city, <span class="at">n =</span> <span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>              <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>newcity, <span class="at">y =</span> comm_score)) <span class="sc">+</span> <span class="fu">geom_violin</span>() <span class="sc">+</span> <span class="fu">geom_point</span>()</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> d2 <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">newcity =</span> forcats<span class="sc">::</span><span class="fu">fct_lump</span>(city, <span class="at">n =</span> <span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>              <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>newcity, <span class="at">y =</span> crit_score)) <span class="sc">+</span> <span class="fu">geom_violin</span>() <span class="sc">+</span> <span class="fu">geom_point</span>()</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>p3 <span class="ot">&lt;-</span> d2 <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">newcity =</span> forcats<span class="sc">::</span><span class="fu">fct_lump</span>(city, <span class="at">n =</span> <span class="dv">1</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>              <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>newcity, <span class="at">y =</span> dave_score)) <span class="sc">+</span> <span class="fu">geom_violin</span>() <span class="sc">+</span> <span class="fu">geom_point</span>()</span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>cowplot<span class="sc">::</span><span class="fu">plot_grid</span>(p1, p2, p3, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">'A'</span>, <span class="st">'B'</span>,<span class="st">'C'</span>), <span class="at">label_size =</span> <span class="dv">12</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/plot-location-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Looks like the community in NY gives lower scores compared to other locations, less noticeable difference for critics and Dave.</p>
<p>Ok, the next analysis might not make much sense, but why not check if there is a North-South or East-West trend related to ratings. Maybe restaurants are better in one of those directions? Or people in the South are more polite and give better scores? 😁. I’m mostly doing this because longitude and latitude are continuous variables, so I can make a few more scatterplots. I don’t have any real goal for this otherwise.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> d2 <span class="sc">%&gt;%</span>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>longitude, <span class="at">y =</span> comm_score)) <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">'lm'</span>)</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> d2 <span class="sc">%&gt;%</span>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>longitude, <span class="at">y =</span> crit_score)) <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">'lm'</span>)</span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>p3 <span class="ot">&lt;-</span> d2 <span class="sc">%&gt;%</span>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>longitude, <span class="at">y =</span> dave_score)) <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">'lm'</span>)</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>cowplot<span class="sc">::</span><span class="fu">plot_grid</span>(p1, p2, p3, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">'A'</span>, <span class="st">'B'</span>,<span class="st">'C'</span>), <span class="at">label_size =</span> <span class="dv">12</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula 'y ~ x'
`geom_smooth()` using formula 'y ~ x'
`geom_smooth()` using formula 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/plot-longitude-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>So as we go from the west (-120) to the east (-70), there is a trend in restaurants getting higher scores, by all 3 groups. I guess as we are moving closer to Italy, the pizza quality goes up? 😃.</p>
<p>Next, let’s look at latitude.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> d2 <span class="sc">%&gt;%</span>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>latitude, <span class="at">y =</span> comm_score)) <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">'lm'</span>)</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> d2 <span class="sc">%&gt;%</span>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>latitude, <span class="at">y =</span> crit_score)) <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">'lm'</span>)</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>p3 <span class="ot">&lt;-</span> d2 <span class="sc">%&gt;%</span>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>latitude, <span class="at">y =</span> dave_score)) <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">'lm'</span>)</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>cowplot<span class="sc">::</span><span class="fu">plot_grid</span>(p1, p2, p3, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">'A'</span>, <span class="st">'B'</span>,<span class="st">'C'</span>), <span class="at">label_size =</span> <span class="dv">12</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula 'y ~ x'
`geom_smooth()` using formula 'y ~ x'
`geom_smooth()` using formula 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/plot-latitude-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>So doesn’t seem as much of a trend going from South (25) to North (45). That finding of course fully confirms our “closer to Italy” theory!</p>
<p>Ok, I was going to leave it at that with location, but since I’m already going down a crazy rabbit hole regarding Italy, let’s do it for real: We’ll take both longitude and latitude of each restaurant and use it compute the distance of each location to Naples, the home of Pizza. And then we’ll plot that and see.</p>
<p>Since I have no idea how to do that, I need Google. Fortunately, the first hit worked, found this one: <a href="https://stackoverflow.com/questions/32363998/function-to-calculate-geospatial-distance-between-two-points-lat-long-using-r" class="uri">https://stackoverflow.com/questions/32363998/function-to-calculate-geospatial-distance-between-two-points-lat-long-using-r</a></p>
<p>Let’s try.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>coord_naples<span class="ot">=</span><span class="fu">cbind</span>(<span class="fu">rep</span>(<span class="fl">14.2</span>,<span class="fu">nrow</span>(d2)),<span class="fu">rep</span>(<span class="fl">40.8</span>,<span class="fu">nrow</span>(d2)))  <span class="co">#location of naples</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>coord_restaurants <span class="ot">=</span> <span class="fu">cbind</span>(d2<span class="sc">$</span>longitude,d2<span class="sc">$</span>latitude)</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>distvec <span class="ot">=</span> <span class="fu">rep</span>(<span class="dv">0</span>,<span class="fu">nrow</span>(d2))</span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (n <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(d2))</span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>  distvec[n] <span class="ot">=</span> <span class="fu">distm</span>( coord_restaurants[n,], coord_naples[n,], <span class="at">fun =</span> distGeo)</span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>d2<span class="sc">$</span>distvec <span class="ot">=</span> distvec <span class="sc">/</span> <span class="dv">1609</span> <span class="co">#convert to miles since we are in the US :)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>It’s not tidyverse style, which I tried first but couldn’t get it to work. The trusty old for-loop seems to always work for me. I checked the numbers in distvec, they look reasonable.</p>
<p>Ok, let’s redo the plots above, now with distance to Naples.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> d2 <span class="sc">%&gt;%</span>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>distvec, <span class="at">y =</span> comm_score)) <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">'lm'</span>)</span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>p2 <span class="ot">&lt;-</span> d2 <span class="sc">%&gt;%</span>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>distvec, <span class="at">y =</span> crit_score)) <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">'lm'</span>)</span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>p3 <span class="ot">&lt;-</span> d2 <span class="sc">%&gt;%</span>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>distvec, <span class="at">y =</span> dave_score)) <span class="sc">+</span> <span class="fu">geom_point</span>() <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">'lm'</span>)</span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>cowplot<span class="sc">::</span><span class="fu">plot_grid</span>(p1, p2, p3, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">'A'</span>, <span class="st">'B'</span>,<span class="st">'C'</span>), <span class="at">label_size =</span> <span class="dv">12</span>, <span class="at">nrow =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`geom_smooth()` using formula 'y ~ x'
`geom_smooth()` using formula 'y ~ x'
`geom_smooth()` using formula 'y ~ x'</code></pre>
</div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/plot-naples-distance-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Hm ok, no smoking gun. Looks like there is a bit of a trend that the further away you are from Naples, the lower the score. But really not much.</p>
</section>
<section id="hyping-our-result" class="level1">
<h1>Hyping our result</h1>
<p>But since this distance-from-Naples makes such a good story, let’s see if I can hype it.</p>
<p>First, to increase potential statistical strength, I’ll combine all 3 scores into an overall mean, i.e.&nbsp;similar ot the <code>all</code> variable in the original. I don’t trust that one since I don’t know if they averaged over 0 instead of properly treating it as NA. Of course I could check, but I’m just re-creating it here.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>d2<span class="sc">$</span>all_score <span class="ot">=</span> <span class="fu">rowMeans</span>(<span class="fu">cbind</span>(d2<span class="sc">$</span>dave_score,d2<span class="sc">$</span>crit_score,d2<span class="sc">$</span>comm_score),<span class="at">na.rm=</span><span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Ok, let’s check if correlation between this new score and distance is <em>significant!</em></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="co">#compute a linear fit and p-value (it's significant!)</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>fit<span class="ot">=</span><span class="fu">lm</span>(d2<span class="sc">$</span>all_score <span class="sc">~</span> d2<span class="sc">$</span>distvec, <span class="at">data =</span> d2)</span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(fit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = d2$all_score ~ d2$distvec, data = d2)

Residuals:
    Min      1Q  Median      3Q     Max 
-6.7854 -0.5866  0.3027  0.9612  2.3686 

Coefficients:
              Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)  8.9895014  0.7008802  12.826  &lt; 2e-16 ***
d2$distvec  -0.0004772  0.0001525  -3.129  0.00187 ** 
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 1.478 on 459 degrees of freedom
  (2 observations deleted due to missingness)
Multiple R-squared:  0.02089,   Adjusted R-squared:  0.01875 
F-statistic: 9.791 on 1 and 459 DF,  p-value: 0.001865</code></pre>
</div>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>pval<span class="ot">=</span><span class="fu">anova</span>(fit)<span class="sc">$</span><span class="st">`</span><span class="at">Pr(&gt;F)</span><span class="st">`</span>[<span class="dv">1</span>]</span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(pval)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.001865357</code></pre>
</div>
</div>
<p>It is signficant, p&lt;0.05! We hit pay dirt! Let’s make a great looking figure and go tell the press!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co">#make final plot</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> d2 <span class="sc">%&gt;%</span>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>distvec, <span class="at">y =</span> all_score)) <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="at">shape =</span> <span class="dv">21</span>, <span class="at">colour =</span> <span class="st">"black"</span>, <span class="at">fill =</span> <span class="st">"red"</span>,  <span class="at">size =</span> <span class="dv">2</span> ) <span class="sc">+</span> <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">'lm'</span>, <span class="at">se =</span> <span class="cn">TRUE</span>, <span class="at">color =</span> <span class="st">"darkgreen"</span>, <span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span> <span class="fu">xlab</span>(<span class="st">'Distance from Naples (miles)'</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">'Pizza Quality (score)'</span>) <span class="sc">+</span> <span class="fu">ylim</span>(<span class="fu">c</span>(<span class="fl">2.5</span>,<span class="fu">max</span>(d2<span class="sc">$</span>all_score))) <span class="sc">+</span> <span class="fu">theme_bw</span>() <span class="sc">+</span><span class="fu">theme</span>(<span class="at">axis.text=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">12</span>), <span class="at">axis.title=</span><span class="fu">element_text</span>(<span class="at">size=</span><span class="dv">14</span>,<span class="at">face=</span><span class="st">"bold"</span>)) <span class="sc">+</span> <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x=</span><span class="dv">6000</span>, <span class="at">y=</span><span class="dv">9</span>, <span class="at">label=</span> <span class="fu">paste</span>(<span class="st">"p ="</span>,<span class="fu">round</span>(pval,<span class="dv">4</span>)),<span class="at">size =</span> <span class="dv">12</span>) </span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="st">'pizzadistance.png'</span>)</span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="st">"pizzadistance.png"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="pizzadistance.png" class="img-fluid" width="1050"></p>
</div>
</div>
</section>
<section id="the-press-release" class="level1">
<h1>The “press release”</h1>
<p>A novel study of pizza restaurants in the US found a clear, statistically significant correlation between the distance of the restaurant to Naples and the quality of the pizza as determined by the community and expert restaurant critics. The study authors attribute the finding to the ability of restaurants that are closer to Naples to more easily get genuine fresh and high quality ingredients, such as the famous San Marzano tomatoes.</p>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="pizzadistance.png" class="img-fluid figure-img" width="1050"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="summary" class="level1">
<h1>Summary</h1>
<p>That was a fun exploration. It was the first time I played with the tidyverse data. I had no idea which direction it was going to go, and ideas just came as I was doing it. I’m sure there is interesting stuff in datasets 1 and 3 as well, but I already spent several hours on this and will therefore call it quits now.</p>
<p>While the exercise was supposed to focus on cleaning/wrangling and visualizing, I couldn’t resist going all the way at the end and producing a <strong>statistically significant</strong> and <strong>somewhat plausible sounding</strong> finding. If this were a “real” study/analysis, such a nice result would be happily accepted by most analysts/authors, hyped by a university press release and - if the result is somewhat interesting/cute, picked up by various media outlets.</p>
<p>I had no idea at the beginning what I was going to analyze, I did that longitude/latitude analysis on a whim, and if I hadn’t found this correlation and had that crazy <em>distance to Italy</em> idea, nothing would have happened. But now that I have a <strong>significant</strong> result and a good story to go with, I can publish! It’s not really much sillier than for instance the <a href="https://www.nejm.org/doi/full/10.1056/NEJMon1211064">Chocolate and Nobel Laureates paper</a> paper.</p>
<p>What I illustrated here (without having had any plan to do so), is a big, general problem in secondary data analysis. It’s perfectly ok to do secondary analyses, and computing significance is also (kinda) ok, but selling exploratory (fishing) results as inferential/causal/confirmatory is wrong - and incredibly widespread. If you want to sharpen your critical thinking skills related to all those supposed significant and <em>real</em> findings in science we see a lot, a great (though at times sobering) read is <a href="https://statmodeling.stat.columbia.edu/">Andrew Gelman’s blog</a> where he regularly picks apart studies/results like the one I did here or the chocolate and Nobel laureates one. And now I’ll go eat some chocolate so I can increase my chances for a Nobel prize.</p>


</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents"><h2 class="anchored quarto-appendix-heading">Citation</h2><div><div class="quarto-appendix-secondary-label">BibTeX citation:</div><pre class="sourceCode code-with-copy quarto-appendix-bibtex"><code class="sourceCode bibtex">@online{handel2019,
  author = {Andreas Handel},
  editor = {},
  title = {Analysis of Pizza Restaurants},
  date = {2019-10-12},
  url = {https://www.andreashandel.com/posts/2019-10-02-tidy-tuesday-exploration},
  langid = {en}
}
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre><div class="quarto-appendix-secondary-label">For attribution, please cite this work as:</div><div id="ref-handel2019" class="csl-entry quarto-appendix-citeas" role="doc-biblioentry">
Andreas Handel. 2019. <span>“Analysis of Pizza Restaurants.”</span>
October 12, 2019. <a href="https://www.andreashandel.com/posts/2019-10-02-tidy-tuesday-exploration">https://www.andreashandel.com/posts/2019-10-02-tidy-tuesday-exploration</a>.
</div></div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } 
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
<script src="https://utteranc.es/client.js" repo="andreashandel/andreashandelwebsite" issue-term="pathname" theme="github-light" crossorigin="anonymous" async="">
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left"><i class="fa-regular fa-copyright" aria-hidden="true"></i> Andreas Handel, 2022<br> All content licensed under <i class="fa-brands fa-creative-commons" aria-hidden="true"></i> <i class="fa-brands fa-creative-commons-by" aria-hidden="true"></i> <i class="fa-brands fa-creative-commons-sa" aria-hidden="true"></i> <i class="fa-brands fa-creative-commons-nc" aria-hidden="true"></i> <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">(CC BY-NC-SA 4.0)</a></div>   
      <div class="nav-footer-center"><div class="cookie-consent-footer"><a href="#" id="open_preferences_center">Cookie Preferences</a></div></div>
    <div class="nav-footer-right">Made with <i class="fa-brands fa-r-project" aria-hidden="true"></i> and <a href="https://quarto.org/">Quarto</a><br> Inspiration and code snippets taken from <a href="../../posts/quarto-website-migration.html">these folks.</a><br> <a href="https://github.com/andreashandel/andreashandelwebsite">Source at <i class="fa-brands fa-github" aria-hidden="true"></i> GitHub</a></div>
  </div>
</footer>



</body></html>